<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>ä»»åŠ¡ç®¡ç† - TaskConductor</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 30px; }
    h1 { text-align: center; }
    .task-section { margin-top: 30px; }
    .task-table { width: 100%; max-width: 800px; margin: auto; border-collapse: collapse; }
    .task-table th, .task-table td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    .form-box { max-width: 600px; margin: 30px auto; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .form-box input, .form-box select, .form-box button {
      width: 100%; padding: 8px; margin: 10px 0; font-size: 16px;
    }
    .form-box button { background: #4caf50; color: white; border: none; border-radius: 6px; cursor: pointer; }
    .back-home {
      position: absolute;
      top: 20px;
      left: 20px;
      background: #007bff;
      color: white;
      padding: 10px 15px;
      text-decoration: none;
      border-radius: 5px;
      font-size: 14px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .back-home:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>

<a href="/" class="back-home">ğŸ  è¿”å›ä¸»é¡µ</a>

<h1>ğŸ—‚ï¸ ä»»åŠ¡ç®¡ç†é¡µé¢</h1>

<div class="form-box">
  <form method="POST">
    <label>ä»»åŠ¡åç§°</label>
    <input type="text" name="name" required />
    
    <label>ç±»åˆ«</label>
    <select name="category">
      <option value="CoreA">Aç±»</option>
      <option value="CoreB">Bç±»</option>
      <option value="CoreC">Cç±»</option>
      <option value="CoreD">Dç±»</option>
      <option value="Temp">ä¸´æ—¶ä»»åŠ¡</option>
    </select>

    <label>æˆªæ­¢æ—¥æœŸ</label>
    <input type="date" name="due_date" required />

    <label>ä¼˜å…ˆçº§ï¼ˆ1-5ï¼‰</label>
    <input type="number" name="priority" min="1" max="5" required />

    <button type="submit">ğŸ’¾ æ·»åŠ /ä¿®æ”¹ä»»åŠ¡</button>
  </form>
</div>

<h1>ğŸ“Œ æ·»åŠ ä¸€æ¬¡æ€§ä»»åŠ¡</h1>
<div class="form-box">
  <form method="POST">
    <input type="hidden" name="form_type" value="one_time_add">
    <label>ä»»åŠ¡åç§°</label>
    <input type="text" name="name" required />
    <label>å¼€å§‹æ—¶é—´</label>
    <input type="datetime-local" name="start_time" required />
    <label>ç»“æŸæ—¶é—´</label>
    <input type="datetime-local" name="end_time" required />
    <button type="submit">â• æ·»åŠ ä¸€æ¬¡æ€§ä»»åŠ¡</button>
  </form>
</div>

<h2>ğŸ§¾ å½“å‰ä¸€æ¬¡æ€§ä»»åŠ¡</h2>
<table class="task-table">
  <tr><th>ä»»åŠ¡å</th><th>å¼€å§‹</th><th>ç»“æŸ</th><th>å®Œæˆ</th><th>æ“ä½œ</th></tr>
  {% for t in one_time %}
  <tr>
    <td>{{ t.name }}</td>
    <td>{{ t.start_time[5:16] }}</td>
    <td>{{ t.end_time[5:16] }}</td>
    <td>{{ "âœ…" if t.completed else "âŒ" }}</td>
    <td>
      <form method="POST" style="display:inline;">
        <input type="hidden" name="form_type" value="one_time_delete">
        <input type="hidden" name="name" value="{{ t.name }}">
        <button type="submit">ğŸ—‘ åˆ é™¤</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>


{% for cat in ["CoreA", "CoreB", "CoreC", "CoreD"] %}
  <div class="task-section">
    <h2>ğŸ“ ç±»åˆ«ï¼š{{ cat }}</h2>
    <table class="task-table">
      <tr>
        <th>ä»»åŠ¡åç§°</th>
        <th>æˆªæ­¢æ—¥æœŸ</th>
        <th>ä¼˜å…ˆçº§</th>
        <th>å†å²è®°å½•æ•°</th>
      </tr>
      {% for t in tasks if t.category == cat %}
      <tr>
        <td>{{ t.name }}</td>
        <td>{{ t.due_date }}</td>
        <td>{{ t.priority }}</td>
        <td>{{ t.history | length }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
{% endfor %}

</body>
</html>
